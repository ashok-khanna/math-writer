<!DOCTYPE html>
<html lang="en">
<head>
  <title>Math Writer</title>

  <!-- Ensures Special Characters are Encoded Correctly -->
	<meta charset="utf-8"> 

  <!-- Ensures mobile browsers correctly adjust viewport. Note that this website is not intended for mobile use -->
	<meta name="viewport" content="width=device-width, initial-scale=1"> 

  <!-- Primary Style Sheet -->
	<link rel="stylesheet" type="text/css" href="writer.css">

  <!-- Load TinyMCE, the Rich Text Editor used on this website -->
	<script src="tinymce/tinymce.min.js" referrerpolicy="origin"></script>

  <!-- Primary JavaScript file. Note that we load this after TinyMCE as we will make configurations here -->
  <script src="writer.js" referrerpolicy="origin"></script>

  <!-- Script for adding view on GitHub & GitHub Stars to the header -->
  <script src="https://buttons.github.io/buttons.js"></script>

  <!-- MathJax Configuration Settings -->
  <script>
  window.MathJax = {
    loader: { load: ['[tex]/ams'] },
    tex: { packages: {'[+]': ['ams']} },
    "fast-preview": { disabled: true },
    extensions: ["tex2jax.js", "asciimath2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js", "TeX/noErrors.js"],
    jax: ["input/TeX", "input/AsciiMath", "output/HTML-CSS"],
    displayAlign: "left",
    tex2jax: {
      inlineMath: [ ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }, 
    asciimath2jax: { delimiters: [['`','`']], preview: [""]},
    "HTML-CSS": { fonts: ["STIX"] }
  }
  </script>
  
  <!-- Load MathJax for rendering Math. Configuration settings are above
    Note we use MathJax 2.7.7 and not the latest because we want to customise our font to STIX -->
  <script type="text/javascript" sync src="MathJax-2.7.7/MathJax.js"></script>

  <!-- Google Adsense & Analytics -->
  <script data-ad-client="ca-pub-8786835491516142" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
    </script>
</head>

<body>

<!-- Main CSS Grid -->
<main id="main">

  <!-- View on GitHub Button -->
  <div id="github"><a class="github-button" href="https://github.com/ashok-khanna/math-writer" data-color-scheme="no-preference: light; light: light; dark: light;" data-size="large" aria-label="Use this template ashok-khanna/ashok-khanna.github.io on GitHub">View on GitHub</a></div>

  <!-- View on GitHub Star -->
  <div id="star"><a id="star" class="github-button" href="https://github.com/ashok-khanna/math-writer" data-color-scheme="no-preference: light; light: light; dark: light;" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star ashok-khanna/ashok-khanna.github.io on GitHub">Star</a></div>

  <!-- Page logo -->
  <div id="text">https://writer.math.dev</div>
  
  <!-- Gutters for spacing the top part of the file -->
  <div id="top-gutter"></div>
  <div id="second-gutter"></div>

  <!-- Main navigation buttons -->
  <div id="editor-button" class="button bt-active" onclick="editor()">Editor</div>
  <div id="preview-button" class="button bt-inactive" onclick="preview()">Preview</div>
  <div id="shortcut-button" class="button bt-inactive" onclick="shortcuts()">Shortcuts</div>
  <div id="help-button" class="button bt-inactive" onclick="help()">Read Me</div>
  
  <!-- Gutter for spacing away the main editor -->
  <div id="third-gutter"></div>

  <!-- Container for Editor & Character Matrix. Also a CSS Grid -->
  <div id="main-screen">

    <!-- Div for Editor. Note that its the inner div "tinymce" that is the actual editor -->
    <div id="editor">
      <div id="tinymce" contenteditable="true" spellcheck="false"></div>
    </div>

    <!-- Div where we insert the output from the editor.
      The content is just a placeholder so that MathJax
      can recognise and attach this div to its DOM. It will get overriden
      whenever the below is used to generate output from the editor. -->
    <div id="preview">
      `sum_(i=1)^n i^3=((n(n+1))/2)^2`
    </div>

    <!-- Refer bottom of this file. We will load HTML into these divs -->
    <div id="shortcuts"></div>
    <div id="help"></div>

    <!-- Character Matrix for Insertion into Editor -->
    <!-- Hidden until we click the 'Char Map' button in the editor -->
    <div id="char">
      <button onclick="insertTextAtCursor('âŠ‚')" class="dark-char-button">âŠ‚</button>
      <button onclick="insertTextAtCursor('âŠƒ')" class="dark-char-button">âŠƒ</button>
      <button onclick="insertTextAtCursor('â‹ƒ')" class="dark-char-button">â‹ƒ</button>
      <button onclick="insertTextAtCursor('â‹‚')" class="dark-char-button">â‹‚</button>
      <button onclick="insertTextAtCursor('âˆˆ')" class="dark-char-button">âˆˆ</button>
      <button onclick="insertTextAtCursor('â‰¤')" class="dark-char-button">â‰¤</button>
      <button onclick="insertTextAtCursor('â‰¥')" class="dark-char-button">â‰¥</button>
      <button onclick="insertTextAtCursor('â‰ ')" class="dark-char-button">â‰ </button>
      <button onclick="insertTextAtCursor('âˆƒ')" class="dark-char-button">âˆƒ</button>
      <button onclick="insertTextAtCursor('âˆ„')" class="dark-char-button">âˆ„</button>
      <button onclick="insertTextAtCursor('âˆ´')" class="dark-char-button">âˆ´</button>
      <button onclick="insertTextAtCursor('âˆ†')" class="dark-char-button">âˆ†</button>
      <button onclick="insertTextAtCursor('â†¦')" class="dark-char-button">â†¦</button>
      <button onclick="insertTextAtCursor('â†”ï¸')" class="dark-char-button">â†”ï¸</button>
      <button onclick="insertTextAtCursor('âˆ§')" class="dark-char-button">âˆ§</button>
      <button onclick="insertTextAtCursor('âˆ«')" class="dark-char-button">âˆ«</button>
      <button onclick="insertTextAtCursor('â„‚')" class="dark-char-button">â„‚</button>
      <button onclick="insertTextAtCursor('â„')" class="dark-char-button">â„</button>
      <button onclick="insertTextAtCursor('â„¤')" class="dark-char-button">â„¤</button>
      <button onclick="insertTextAtCursor('ğœ€')" class="dark-char-button">ğœ€</button>
      <button onclick="insertTextAtCursor('ğœ‰')" class="dark-char-button">ğœ‰</button>
      <button onclick="insertTextAtCursor('ğœƒ')" class="dark-char-button">ğœƒ</button>
      <button onclick="insertTextAtCursor('ğ›¼')" class="dark-char-button">ğ›¼</button>
      <button onclick="insertTextAtCursor('ğ›¾')" class="dark-char-button">ğ›¾</button>
      <button onclick="insertTextAtCursor('ğœ†')" class="dark-char-button">ğœ†</button>
      <button onclick="insertTextAtCursor('ğœ‡')" class="dark-char-button">ğœ‡</button>
      <button onclick="insertTextAtCursor('ğœŒ')" class="dark-char-button">ğœŒ</button>
      <button onclick="insertTextAtCursor('âŠ„')" class="dark-char-button">âŠ„</button>
      <button onclick="insertTextAtCursor('âŠ…')" class="dark-char-button">âŠ…</button>
      <button onclick="insertTextAtCursor('âˆ‘')" class="dark-char-button">âˆ‘</button>
      <button onclick="insertTextAtCursor('âˆ')" class="dark-char-button">âˆ</button>
      <button onclick="insertTextAtCursor('âˆ‰')" class="dark-char-button">âˆ‰</button>
      <button onclick="insertTextAtCursor('âˆ€')" class="dark-char-button">âˆ€</button>
      <button onclick="insertTextAtCursor('âˆ…')" class="dark-char-button">âˆ…</button>
      <button onclick="insertTextAtCursor('âˆµ')" class="dark-char-button">âˆµ</button>
      <button onclick="insertTextAtCursor('ğ—–')" class="dark-char-button">ğ—–</button>
      <button onclick="insertTextAtCursor('â‡’')" class="dark-char-button">â‡’</button>
      <button onclick="insertTextAtCursor('Â±')" class="dark-char-button">Â±</button>
      <button onclick="insertTextAtCursor('âˆ¨')" class="dark-char-button">âˆ¨</button>
      <button onclick="insertTextAtCursor('âˆ')" class="dark-char-button">âˆ</button>
      <button onclick="insertTextAtCursor('ğ‘–')" class="dark-char-button">ğ‘–</button>
      <button onclick="insertTextAtCursor('â„š')" class="dark-char-button">â„š</button>
      <button onclick="insertTextAtCursor('â„•')" class="dark-char-button">â„•</button>
      <button onclick="insertTextAtCursor('ğœ‹')" class="dark-char-button">ğœ‹</button>
      <button onclick="insertTextAtCursor('ğœ‚')" class="dark-char-button">ğœ‚</button>
      <button onclick="insertTextAtCursor('ğ›¿')" class="dark-char-button">ğ›¿</button>
      <button onclick="insertTextAtCursor('ğ›½')" class="dark-char-button">ğ›½</button>
      <button onclick="insertTextAtCursor('ğœ')" class="dark-char-button">ğœ</button>
      <button onclick="insertTextAtCursor('ğœ’')" class="dark-char-button">ğœ’</button>
      <button onclick="insertTextAtCursor('ğœ')" class="dark-char-button">ğœ</button>
      <button onclick="insertTextAtCursor('ğœ•')" class="dark-char-button">ğœ•</button>
    </div>
  </div>
</main> 

<!-- We need this hidden file input button to be able to import files
  We will programatically click it on behalf of the user -->
<input type="file" style="display:none;" id="import-file" name="file"/>

<script>

// Add event listener to execute readSingleFile when the import-file (hidden button) is clicked
  document.getElementById('import-file').addEventListener('change', readSingleFile, false);

// Put our editor into focus on page load
  document.getElementById("tinymce").focus();
  
// Programmatically load help.html into the file
  var requestOne = new XMLHttpRequest();
  requestOne.open('GET', '/help.html', true);
  requestOne.onload = function() {
  if (requestOne.status >= 200 && requestOne.status < 400) {
      var respOne = requestOne.responseText;
      document.querySelector('#help').innerHTML = respOne;
    }
  };
  requestOne.send();

// Programatically load shortcuts.html into the file
  var requestTwo = new XMLHttpRequest();
  requestTwo.open('GET', '/shortcuts.html', true);
  requestTwo.onload = function() {
  if (requestTwo.status >= 200 && requestTwo.status < 400) {
      var respTwo = requestTwo.responseText;
      document.querySelector('#shortcuts').innerHTML = respTwo;
    }
  };
  requestTwo.send();

</script>
</body>
</html>



